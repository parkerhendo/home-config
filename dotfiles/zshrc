# zsh-defer is optional - configuration will work without it
if [ -f ~/.zsh/plugins/zsh-defer/zsh-defer.plugin.zsh ]; then
  source ~/.zsh/plugins/zsh-defer/zsh-defer.plugin.zsh
  ZSH_DEFER_AVAILABLE=true
else
  ZSH_DEFER_AVAILABLE=false
fi

files=(
  aliases
  bindkeys
  colors
  completion
  functions
  history
  locale
  options
  prompt
  plugins
)

for file in $files; do
  source ~/.zsh/$file.zsh
done

autoload edit-command-line
zle -N edit-command-line
bindkey '^Xe' edit-command-line

# Nix
if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
  . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
fi

# Home Manager session variables
if [ -e '/etc/profiles/per-user/parker/etc/profile.d/hm-session-vars.sh' ]; then
  . '/etc/profiles/per-user/parker/etc/profile.d/hm-session-vars.sh'
fi
# End Nix
